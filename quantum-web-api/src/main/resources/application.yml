server:
  port: 8080

spring:
  application:
    name: quantum-web-api
  
  # Timezone Configuration
  jackson:
    time-zone: Asia/Seoul

  # Database Configuration - PostgreSQL
  datasource:
    url: jdbc:postgresql://localhost:5432/quantum_trading
    driver-class-name: org.postgresql.Driver
    username: quantum
    password: quantum123

  # JPA Configuration
  jpa:
    hibernate:
      ddl-auto: update
    show-sql: true
    properties:
      hibernate:
        dialect: org.hibernate.dialect.PostgreSQLDialect
        format_sql: false

  # H2 Console (ê°œë°œìš©) - PostgreSQL ì‚¬ìš©ìœ¼ë¡œ ë¹„í™œì„±í™”
  h2:
    console:
      enabled: false

  # Spring AI Configuration
  ai:
    openai:
      api-key: ${OPENAI_API_KEY:your-api-key-here}
      chat:
        options:
          model: gpt-4o-mini
          temperature: 0.1

# JWT Configuration
jwt:
  secret: quantum-trading-platform-jwt-secret-key-for-mvp-development-only-change-in-production
  expiration: 86400 # 24 hours in seconds

# Application Configuration
quantum:
  security:
    allowed-origins:
      - http://localhost:3000
      - http://localhost:8080

# LogTree Configuration - ê³„ì¸µí˜• íŠ¸ë ˆì´ì‹± ë¡œê¹… (Logbookì²˜ëŸ¼ ìë™ ì ìš©)
logtree:
  enabled: true
  auto-trace-controllers: true   # ğŸ”¥ ëª¨ë“  ì»¨íŠ¸ë¡¤ëŸ¬ ìë™ ì¶”ì  (ì–´ë…¸í…Œì´ì…˜ ë¶ˆí•„ìš”)
  auto-trace-services: true      # ğŸ”¥ ëª¨ë“  ì„œë¹„ìŠ¤ ìë™ ì¶”ì  (ì–´ë…¸í…Œì´ì…˜ ë¶ˆí•„ìš”)
  auto-trace-repositories: true  # ğŸ”¥ ëª¨ë“  ë¦¬í¬ì§€í† ë¦¬ ìë™ ì¶”ì 
  include-headers: false         # ë¯¼ê°í•œ ì •ë³´ í¬í•¨ ê¸ˆì§€ (Logbookê³¼ ë™ì¼)
  include-args: true             # ë©”ì„œë“œ ì¸ì ìë™ í¬í•¨
  include-result: false          # ê²°ê³¼ê°’ì€ ë³´ì•ˆìƒ ì œì™¸
  track-errors: true             # ì—ëŸ¬ ìë™ ì¶”ì  (Causality Chain)
  exclude-urls:                  # Logbookê³¼ ë™ì¼í•œ ì œì™¸ URL
    - /actuator/**
    - /docs/**
    - /v3/api-docs/**
    - /health
    - /error
    - /favicon.ico
    - /swagger-ui/**
  exclude-packages:              # íŠ¹ì • íŒ¨í‚¤ì§€ ì œì™¸
    - org.springframework.boot.actuate
    - org.springframework.security
  max-depth: 15                  # ì¶©ë¶„í•œ ê¹Šì´ í—ˆìš©
  colored-output: true
  log-style: tree                # tree êµ¬ì¡°ë¡œ ì‹œê°í™”

# Actuator ì„¤ì • (ëª¨ë‹ˆí„°ë§ í¬í•¨)
management:
  endpoints:
    web:
      exposure:
        include: health,info,metrics,prometheus
      base-path: /actuator
  endpoint:
    health:
      show-details: always
    prometheus:
      enabled: true
  info:
    env:
      enabled: true
  prometheus:
    metrics:
      export:
        enabled: true

# SpringDoc OpenAPI ì„¤ì •
springdoc:
  api-docs:
    path: /v3/api-docs
    enabled: true
  swagger-ui:
    path: /docs
    enabled: true
    operationsSorter: method
    tagsSorter: alpha
    displayRequestDuration: true
    defaultModelsExpandDepth: 2
    defaultModelExpandDepth: 2


# Logging - ê°œë°œ ì§‘ì¤‘ ëª¨ë“œ (ëª¨ë‹ˆí„°ë§ ë¹„í™œì„±í™”)
logging:
  level:
    com.quantum: DEBUG  # ê°œë°œ ë””ë²„ê·¸ ëª¨ë“œ
    org.springframework.security: WARN  # ì‹œíë¦¬í‹° ë¡œê·¸ ìµœì†Œí™”
    io.netty.resolver.dns: ERROR  # ë„¤í‹° ê²½ê³  ì™„ì „ ì œê±°

    # LogTree HTTP ë¡œê¹… (Logbook ëŒ€ì²´)
    io.github.logtree: DEBUG

    # Spring Web ë¡œê¹… ìµœì†Œí™”
    org.springframework.web: WARN
    org.springframework.web.servlet.DispatcherServlet: WARN

    # SQL ë¡œê¹… - p6spyë¡œ ê¹”ë”í•˜ê²Œ
    com.p6spy: INFO
    org.hibernate.SQL: OFF  # Hibernate SQL ë¡œê¹… ì™„ì „ ë¹„í™œì„±í™”
    org.hibernate.type.descriptor.sql.BasicBinder: OFF

    # Actuator ëª¨ë‹ˆí„°ë§ ë¡œê·¸ ì™„ì „ ì œê±°
    org.springframework.boot.actuator: OFF
    io.micrometer: OFF
    org.springframework.web.filter: ERROR

# LogTree í†µí•© ë¡œê¹… - HTTP + ë©”ì„œë“œ ê³„ì¸µ ì¶”ì 
# (Logbook ëŒ€ì²´ - HTTP ìš”ì²­/ì‘ë‹µ + ë©”ì„œë“œ íŠ¸ë ˆì´ì‹± í†µí•©)
