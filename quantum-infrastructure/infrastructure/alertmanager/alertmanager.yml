global:
  # Slack API URL (ÌôòÍ≤ΩÎ≥ÄÏàòÎ°ú ÏÑ§Ï†ï)
  slack_api_url: '${SLACK_WEBHOOK_URL}'

# ÏïåÎ¶º ÎùºÏö∞ÌåÖ ÏÑ§Ï†ï
route:
  group_by: ['alertname', 'cluster', 'service']
  group_wait: 10s        # Í∑∏Î£π ÌòïÏÑ± ÎåÄÍ∏∞ ÏãúÍ∞Ñ
  group_interval: 10s    # Í∑∏Î£π ÎÇ¥ Ï∂îÍ∞Ä ÏïåÎ¶º Í∞ÑÍ≤©
  repeat_interval: 12h   # Í∞ôÏùÄ ÏïåÎ¶º Î∞òÎ≥µ Í∞ÑÍ≤©
  receiver: 'quantum-slack'
  
  # Ïã¨Í∞ÅÎèÑÎ≥Ñ ÎùºÏö∞ÌåÖ
  routes:
    - match:
        severity: critical
      receiver: 'quantum-slack-critical'
      group_wait: 0s
      repeat_interval: 5m
    
    - match:
        severity: warning  
      receiver: 'quantum-slack-warning'
      repeat_interval: 1h

# ÏïåÎ¶º ÏàòÏã†Ïûê ÏÑ§Ï†ï
receivers:
  # Í∏∞Î≥∏ Slack Ï±ÑÎÑê
  - name: 'quantum-slack'
    slack_configs:
      - api_url: '${SLACK_WEBHOOK_URL}'
        channel: '#quantum-alerts'
        title: 'Quantum Trading Platform Alert'
        text: >-
          {{ range .Alerts }}
          *Alert:* {{ .Annotations.summary }}
          *Description:* {{ .Annotations.description }}
          *Severity:* {{ .Labels.severity }}
          *Service:* {{ .Labels.job }}
          {{ end }}
        color: 'warning'

  # Critical ÏïåÎ¶ºÏö© Ï±ÑÎÑê
  - name: 'quantum-slack-critical'
    slack_configs:
      - api_url: '${SLACK_WEBHOOK_URL}'
        channel: '#quantum-alerts'
        title: 'üö® CRITICAL: Quantum Trading Platform'
        text: >-
          {{ range .Alerts }}
          *üî• CRITICAL ALERT üî•*
          *Alert:* {{ .Annotations.summary }}
          *Description:* {{ .Annotations.description }}
          *Service:* {{ .Labels.job }}
          *Duration:* {{ .StartsAt.Format "2006-01-02 15:04:05" }}
          *Dashboard:* http://localhost:3000
          {{ end }}
        color: 'danger'

  # Warning ÏïåÎ¶ºÏö© Ï±ÑÎÑê  
  - name: 'quantum-slack-warning'
    slack_configs:
      - api_url: '${SLACK_WEBHOOK_URL}'
        channel: '#quantum-alerts'
        title: '‚ö†Ô∏è WARNING: Quantum Trading Platform'
        text: >-
          {{ range .Alerts }}
          *‚ö†Ô∏è Warning Alert*
          *Alert:* {{ .Annotations.summary }}
          *Description:* {{ .Annotations.description }}
          *Service:* {{ .Labels.job }}
          {{ end }}
        color: 'warning'

# ÏïåÎ¶º ÏñµÏ†ú Í∑úÏπô (Ï§ëÎ≥µ Î∞©ÏßÄ)
inhibit_rules:
  - source_match:
      severity: 'critical'
    target_match:
      severity: 'warning'
    equal: ['alertname', 'cluster', 'service']