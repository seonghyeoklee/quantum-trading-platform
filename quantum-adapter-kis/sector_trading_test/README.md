# 섹터별 분산투자 테스트 시스템

2025년 유망섹터 기반 자동매매 테스트 시스템입니다.

## 🎯 개요

6개 유망섹터에 균등 분산투자하여 포트폴리오를 구성하고, 수동 승인 방식으로 매매를 실행하는 테스트 시스템입니다.

### 📊 2025년 선정 유망섹터

| 섹터 | 대표종목 | 투자 테마 |
|------|----------|-----------|
| 🚢 **조선** | HD한국조선해양, 대우조선해양 | 친환경선박, K-조선 르네상스 |
| 🛡️ **방산** | 한화에어로스페이스, KAI | KF-21 양산, 방산수출 확대 |
| ⚡ **원자력** | 두산에너빌리티, 한전KPS | SMR 기술, 원전 재개 |
| 🤖 **AI** | 네이버, 카카오 | 생성형AI, 데이터센터 |
| 💾 **반도체** | 삼성전자, SK하이닉스 | AI칩, HBM 독점공급 |
| 🧬 **바이오** | 삼성바이오로직스, 셀트리온 | K-바이오벨트, 글로벌 진출 |

## 🏗️ 시스템 구조

```
sector_trading_test/
├── config/                 # 설정 파일
│   ├── sectors_2025.yaml   # 2025년 유망섹터 설정
│   ├── strategy_config.yaml # 매매 전략 설정
│   └── risk_management.yaml # 리스크 관리 설정
├── core/                   # 핵심 모듈
│   ├── sector_portfolio.py # 섹터 포트폴리오 관리
│   ├── manual_executor.py  # 수동 매매 실행기
│   └── trade_logger.py     # 상세 거래 로깅
├── manual_trader.py        # 메인 실행 파일
├── logs/                   # 거래 로그 및 기록
└── README.md              # 이 파일
```

## 🚀 빠른 시작

### 1. 환경 준비

```bash
# KIS API 설정 확인
# ../kis_devlp.yaml 파일에 API 키가 설정되어 있어야 함

# 필요한 Python 패키지 설치
cd quantum-adapter-kis
uv sync  # 또는 pip install -r requirements.txt
```

### 2. 실행 방법

```bash
# 모의투자 모드 (추천 - 테스트용)
python manual_trader.py

# 실전투자 모드 (주의!)
python manual_trader.py --prod

# 분석만 수행 (매매 없음)
python manual_trader.py --analysis
```

## 🎮 사용법

### 메인 메뉴

실행하면 다음과 같은 메뉴가 나타납니다:

```
🎮 섹터 분산투자 수동 매매 시스템
============================================================
1. 📊 시장 분석 및 매매 신호 확인
2. 📈 포트폴리오 현황 보기
3. 📋 거래 기록 조회
4. ⚙️ 설정 및 리밸런싱
5. 📄 리포트 생성
6. 🔄 시스템 상태 새로고침
0. 🚪 종료
============================================================
```

### 매매 프로세스

1. **신호 분석**: 6개 섹터 12개 종목의 매매 신호 분석
2. **사용자 승인**: 각 신호별로 상세 정보 확인 후 승인/거부
3. **실행**: 승인된 신호만 실제 매매 실행
4. **로깅**: 모든 과정을 상세히 기록

### 매매 신호 예시

```
🎯 매매 추천: 삼성전자(005930)
📍 섹터: 반도체
📈 신호: BUY
🎲 확신도: 0.85 (78/100)
============================================================
💰 현재가: 71,000원

📋 매매 근거:
   1. 반도체 섹터 비중 부족으로 리밸런싱 필요
   2. 2025년 반도체 테마 유망
   3. HBM3E 기술 선도, AI칩 협력, 메모리 1위

📊 기술적 지표:
   현재가: 71000.00
   RSI: 45.23
   MACD: 골든크로스
   거래량비율: 1.34

💵 투자 계획:
   목표 금액: 833,333원
   매수 수량: 11주
   실제 금액: 781,000원

실행하시겠습니까? (y/n/d): 
```

## 📊 기능 상세

### 1. 포트폴리오 관리
- **균등 배분**: 6개 섹터에 각각 16.67% 목표 비중
- **자동 리밸런싱**: 목표 비중과 5% 이상 차이시 리밸런싱 신호
- **리스크 관리**: 섹터별/종목별 손절선 및 집중도 제한

### 2. 상세 로깅
- **매매 신호**: 근거, 기술적 지표, 리스크 평가 모두 기록
- **실행 기록**: 주문 결과, 수수료, 포트폴리오 변화
- **성과 추적**: 종목별/섹터별 수익률, 보유일수
- **다중 형식**: 콘솔, 로그파일, CSV, JSON, Excel

### 3. 리스크 관리
- **포트폴리오 레벨**: 일일/주간/월간 최대 손실 제한
- **섹터별**: 각 섹터 특성에 맞는 손절선 및 목표가
- **종목별**: 시가총액별 차등 리스크 관리
- **긴급 상황**: 자동 전량 매도 조건

## 📈 투자 전략

### 기본 전략
- **섹터 균등 배분**: 6개 섹터 × 16.67% = 100%
- **종목 분산**: 섹터당 2개 종목 (주/보조)
- **정기 리밸런싱**: 월 1회 또는 편차 5% 이상시
- **수동 승인**: 모든 매매는 사용자 승인 후 실행

### 리스크 관리
```yaml
손절선:
  - 포트폴리오: -12%
  - 섹터별: -8% ~ -15% (섹터 특성별)
  - 종목별: 시가총액별 차등

목표 수익률:
  - 포트폴리오: +15% ~ +20%
  - 섹터별: +18% ~ +35% (성장성별)
```

## 📁 로그 파일 구조

```
logs/
├── trading_20250104.log          # 일반 로그
├── executions_20250104.log       # 매매 실행 로그
├── performance_20250104.log      # 성과 로그
├── signals_20250104.jsonl        # 매매 신호 (JSON Lines)
├── executions_20250104.csv       # 매매 실행 (CSV)
├── performance_20250104.csv      # 성과 기록 (CSV)
├── portfolio_state_*.json        # 포트폴리오 스냅샷
├── daily_report_20250104.txt     # 일일 리포트
└── trading_report_20250104.xlsx  # 종합 Excel 리포트
```

## ⚙️ 설정 커스터마이징

### 섹터 및 종목 변경
`config/sectors_2025.yaml`에서 섹터와 종목을 수정할 수 있습니다.

### 매매 전략 조정
`config/strategy_config.yaml`에서 다음을 조정 가능:
- 매수/매도 신호 조건
- 포지션 크기 및 배분 방식
- 실행 설정 (시장가/지정가 등)

### 리스크 관리 설정
`config/risk_management.yaml`에서 다음을 조정 가능:
- 손절선 및 목표 수익률
- 섹터별 리스크 한도
- 긴급 상황 대응 조건

## 🔧 개발자 정보

### 테스트 및 디버깅

```bash
# 개별 모듈 테스트
cd core/
python sector_portfolio.py    # 포트폴리오 매니저 테스트
python trade_logger.py        # 로깅 시스템 테스트
python manual_executor.py     # 실행기 테스트
```

### 확장 방향
1. **자동 모드**: 사용자 승인 없이 자동 실행
2. **고급 기술분석**: RSI, MACD, 볼린저밴드 등 실제 지표
3. **뉴스 분석**: 뉴스 감정 분석 기반 신호 생성
4. **백테스팅**: 과거 데이터 기반 전략 검증
5. **알림 시스템**: 텔레그램, 이메일 알림

## ⚠️ 주의사항

1. **투자 위험**: 모든 투자에는 손실 위험이 따릅니다
2. **모의투자 우선**: 실전 투자 전 충분한 모의투자 테스트 권장
3. **API 한도**: KIS API 호출 제한 (실전: 20건/초, 모의: 2건/초)
4. **시장 시간**: 장 마감 후에는 일부 기능 제한
5. **설정 백업**: 중요한 설정 변경 전 백업 권장

## 📞 문의

시스템 관련 문의나 개선 제안은 프로젝트 담당자에게 연락해주세요.

---

**⚡ 2025년 유망섹터로 새로운 투자 기회를 잡아보세요!**