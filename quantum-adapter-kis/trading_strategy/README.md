# 골든크로스 백테스팅 시스템 (Backtrader 기반)

종목별 최적 확정 기간 분석을 위한 전문 백테스팅 시스템

## 🎯 핵심 기능

- **Backtrader 기반 전문 백테스팅**: 업계 표준 백테스팅 라이브러리 사용
- **종목별 최적 확정 기간 분석**: 1일~7일 확정 기간별 수익률 비교
- **실시간 신호 감지**: 백테스팅 결과 기반 최적 설정 자동 적용
- **KIS API 연동**: 실제 시장 데이터를 활용한 정확한 분석

## 🚀 빠른 시작

### 백테스팅 실행

```bash
# 종목별 최적 확정 기간 분석
python run_backtest.py

# 신호 감지 시스템 테스트
python test_optimized_system.py
```

### 실시간 모니터링

```bash
# 골든크로스 신호 모니터링 (백테스팅 결과 적용)
python main.py
```

## 📊 백테스팅 결과 예시

```
🚀 골든크로스 백테스팅 시스템 (Backtrader)
======================================================================
📅 테스트 기간: 최근 150일
📊 테스트 종목: 5개
⚙️  확정 기간: 1일, 2일, 3일, 5일, 7일
💰 초기 자금: 1,000만원
🔧 엔진: Backtrader (전문 백테스팅 라이브러리)

📊 삼성전자(005930) 확정 기간별 비교 결과
================================================================
확정기간     총수익률         시작자금         최종자금        
----------------------------------------------------------------
1일          +0.08%   10,000,000원   10,007,564원
2일          +0.06%   10,000,000원   10,006,464원
3일          +0.06%   10,000,000원   10,005,664원
5일          +0.10%   10,000,000원   10,009,924원
7일          +0.14%   10,000,000원   10,014,142원
----------------------------------------------------------------
🏆 최적: 7일 확정 (수익률: +0.14%)
```

## 📁 시스템 구조

```
trading_strategy/
├── core/                           # 핵심 모듈
│   ├── backtester.py              # Backtrader 기반 백테스터
│   ├── signal_detector.py         # 최적화된 신호 감지
│   ├── technical_analysis.py      # 기술적 분석
│   └── strategy_base.py           # 전략 기반 클래스
├── monitor/                        # 실시간 모니터링
│   ├── signal_monitor.py          # 신호 모니터링
│   └── order_simulator.py         # 주문 시뮬레이션
├── run_backtest.py                # 메인 백테스팅 실행
├── test_optimized_system.py       # 시스템 테스트
└── main.py                        # 실시간 모니터링 실행
```

## 🔧 종목별 최적 설정 (백테스팅 검증)

시스템이 자동으로 적용하는 종목별 최적 확정 기간:

- **삼성전자 (005930)**: 7일 확정 (+0.14%)
- **카카오 (035720)**: 1일 확정 (+0.17%)  
- **HD한국조선해양 (009540)**: 7일 확정 (+1.17%)
- **한화에어로스페이스 (012450)**: 2일 확정 (+0.50%)
- **OCI (010060)**: 7일 확정 (-0.01%)

### 기본 전략
- **대형주 (시가총액 상위)**: 7일 확정 (안정성 우선)
- **중소형주/테마주**: 2일 확정 (민감도 우선)

## 📈 신호 감지 시스템

```python
from core.signal_detector import SignalDetector

# 자동으로 종목별 최적 확정 기간 적용
detector = SignalDetector()
signal = detector.detect_golden_cross(df, "005930", "삼성전자")

if signal:
    print(f"신호 타입: {signal.signal_type}")
    print(f"확신도: {signal.confidence}")  
    print(f"신호 강도: {signal.strength}/100")
    print(f"확정 기간: {detector.get_optimal_confirmation_days('005930')}일")
```

## 💡 백테스팅 성과

- **평균 수익률**: +0.39%
- **수익 종목 비율**: 80% (4/5개)
- **최적 확정 기간 분포**: 
  - 1일: 20% (민감한 반응)
  - 2일: 20% (균형잡힌 접근)
  - 7일: 60% (안정성 우선)

## ⚙️ 기술 스택

- **Backtrader**: 전문 백테스팅 프레임워크
- **pandas**: 데이터 처리 및 분석
- **numpy**: 수치 계산
- **KIS Open API**: 실시간 주식 데이터

## 🔄 시스템 업그레이드

기존 자체 백테스터에서 **Backtrader 전문 라이브러리**로 완전 전환:

- ✅ **정확한 확정 기간 로직**: 연속 일수 제대로 계산
- ✅ **실시간 매매 시뮬레이션**: 실제 거래와 동일한 로직
- ✅ **수수료 및 슬리피지 고려**: 현실적인 백테스팅
- ✅ **전문 성과 지표**: 수익률, 승률, 최대 손실 등

## 📝 라이선스

Quantum Trading Platform © 2024