# 키움 API - 구글 시트 크롤링 데이터 매핑 분석

## 📊 개요
구글 시트에서 크롤링하는 데이터와 현재 구현된 키움 API의 매핑 관계를 분석하여 대체 가능성을 평가합니다.

## 🔍 현재 구현된 키움 API 목록

### 📈 시세/종목 정보 API
| API ID | 함수명 | 기능 | 제공 데이터 |
|--------|--------|------|-------------|
| ka10001 | fn_ka10001 | 주식기본정보요청 | 종목명, 현재가, 전일대비, PER, PBR 등 |
| ka10099 | fn_ka10099 | 종목정보조회 | 상세 종목 정보 |
| ka10100 | fn_ka10100 | 종목상세정보 | 추가 종목 정보 |
| ka10101 | fn_ka10101 | 종목시세정보 | 실시간 시세 정보 |
| ka10095 | fn_ka10095 | 종목별투자자정보 | 투자자별 매매 정보 |
| ka90003 | fn_ka90003 | 종목검색 | 종목 검색 기능 |

### 📊 차트 데이터 API  
| API ID | 함수명 | 기능 | 제공 데이터 |
|--------|--------|------|-------------|
| ka10005 | fn_ka10005 | 과거시세조회 | 일/주/월봉 데이터 |
| ka10006 | fn_ka10006 | 분차트조회 | 분봉 데이터 |
| ka10060 | fn_ka10060 | 종목별투자자기관별차트조회 | 기관/외국인 매매 차트 |
| ka10080~ka10094 | fn_ka10080~fn_ka10094 | 각종 차트 조회 | 다양한 차트 데이터 |

### 🏛️ 기관/외국인 데이터 API
| API ID | 함수명 | 기능 | 제공 데이터 |
|--------|--------|------|-------------|
| ka10044 | fn_ka10044 | 일별기관매매종목요청 | 일별 기관 매매 동향 |
| ka10045 | fn_ka10045 | 종목별기관매매추이요청 | 종목별 기관/외국인 보유현황 |

### 🔢 기타 데이터 API
| API ID | 함수명 | 기능 | 제공 데이터 |
|--------|--------|------|-------------|
| ka10004 | fn_ka10004 | 호가조회 | 매수/매도 호가 정보 |
| ka10007 | fn_ka10007 | 시장정보 | 전체 시장 정보 |
| ka10011 | fn_ka10011 | 신주무상권리정보 | 신주 관련 정보 |

## 🗺️ 크롤링 데이터 → 키움 API 매핑

### 🟢 완전 대체 가능 (100%)

#### 네이버 금융 → 키움 API ka10001
| 크롤링 데이터 | 키움 API 필드 | 대체율 |
|---------------|---------------|-------|
| 현재가 (71,500원) | stk_pric (현재가) | ✅ 100% |
| 전일대비 (+100원) | prdy_ctrt (전일대비) | ✅ 100% |
| 등락률 (+0.14%) | prdy_ctrt_sign (전일대비부호) | ✅ 100% |
| 거래량 (10,345,178주) | stk_vol (거래량) | ✅ 100% |
| 시가총액 | market_cap 계산 가능 | ✅ 100% |
| PER (15.97) | per (PER) | ✅ 100% |
| PBR (1.23) | pbr (PBR) | ✅ 100% |
| 52주 고가/저가 | high_52w / low_52w | ✅ 100% |

#### 기관/외국인 데이터 → 키움 API ka10045
| 크롤링 데이터 | 키움 API 필드 | 대체율 |
|---------------|---------------|-------|
| 외국인지분율 (50.56%) | for_wght (외국인비중) | ✅ 100% |
| 외국인보유수량 | for_whld_shqty (외국인보유수량) | ✅ 100% |
| 기관보유수량 | orgn_whld_shqty (기관보유수량) | ✅ 100% |
| 기관비중 | orgn_wght (기관비중) | ✅ 100% |

### 🟡 부분 대체 가능 (70-90%)

#### 재무 지표 - 추가 확인 필요
| FnGuide 크롤링 데이터 | 키움 API 가능성 | 대체율 | 비고 |
|---------------------|----------------|-------|------|
| ROE (7.95%) | ka10001 또는 별도 재무 API | 🟡 80% | 키움 재무정보 API 확인 필요 |
| 배당수익률 (2.02%) | 배당 관련 API 탐색 필요 | 🟡 70% | 별도 배당 API 필요 |
| ROA, ROIC | 재무제표 API 필요 | 🟡 60% | 상세 재무 API 확인 필요 |

### 🔴 대체 어려움 (30% 미만)

#### FnGuide 상세 재무비율
| 크롤링 데이터 | 키움 API 한계 | 대체율 | 해결방안 |
|---------------|---------------|-------|---------|
| 부채비율 (25.4%) | 키움에서 제공하지 않음 | ❌ 10% | FnGuide API 또는 별도 데이터 소스 |
| 유동비율 (258.8%) | 키움에서 제공하지 않음 | ❌ 10% | 재무제표 직접 계산 |
| 매출액증가율 (-14.3%) | 키움에서 제공하지 않음 | ❌ 20% | 과거 데이터 비교 계산 |
| 영업이익증가율 | 키움에서 제공하지 않음 | ❌ 20% | 과거 데이터 비교 계산 |

## 📊 기술적 지표 계산 가능성

### 🟢 키움 API로 계산 가능
| 지표 | 필요 데이터 | 키움 API | 계산 복잡도 |
|------|-------------|----------|-------------|
| RSI | 과거 일봉 데이터 | ka10005 (과거시세) | ⭐⭐ (중간) |
| OBV | 가격 + 거래량 | ka10005 (과거시세) | ⭐ (쉬움) |
| 이동평균선 | 과거 종가 | ka10005 (과거시세) | ⭐ (쉬움) |
| MACD | 과거 종가 | ka10005 (과거시세) | ⭐⭐ (중간) |
| 볼린저 밴드 | 과거 종가 | ka10005 (과거시세) | ⭐⭐ (중간) |

### 🟡 부분 계산 가능
| 지표 | 필요 데이터 | 키움 API | 제한사항 |
|------|-------------|----------|---------|
| 투자심리도 | 시장 전체 데이터 | ka10007 (시장정보) | 정확도 제한 |
| 업종 대비 지표 | 업종별 평균 | 별도 API 필요 | 업종 분류 필요 |

## 🎯 API 확장 필요사항

### 📋 추가 확인 필요한 키움 API
1. **재무제표 관련 API**: ROA, ROIC, 부채비율 등
2. **배당정보 API**: 배당수익률, 배당지급일 등  
3. **업종정보 API**: 업종별 평균 PER/PBR 등
4. **기업정보 API**: 시가총액, 상장주식수 등

### 🔧 계산 모듈 개발 필요
1. **기술적 지표 계산기**: RSI, MACD, 볼린저밴드 등
2. **재무비율 계산기**: 성장률, 수익성 지표 등
3. **상대평가 모듈**: 업종/시장 대비 지표

## 📈 구현 우선순위

### Priority 1: 즉시 구현 가능 (🟢)
- ✅ ka10001 기반 기본 종목정보
- ✅ ka10045 기반 기관/외국인 데이터
- ✅ ka10005 기반 기술적 지표 계산

### Priority 2: API 확장 후 구현 (🟡)  
- 🔍 재무정보 API 탐색 및 ROE/ROA 구현
- 🔍 배당정보 API 탐색 및 배당수익률 구현
- ⚙️ 업종별 비교 기능 개발

### Priority 3: 대안 방법 검토 (🔴)
- 🌐 외부 재무 API 연동 (FnGuide API 등)
- 📊 과거 데이터 기반 증가율 계산
- 🔄 크롤링과 키움 API 하이브리드 방식

## 📊 종합 평가

### 대체 가능율 요약
- **완전 대체 가능**: 60% (기본 주가정보, 기관/외국인 데이터)
- **부분 대체 가능**: 25% (일부 재무지표, 기술적 지표)  
- **대체 어려움**: 15% (상세 재무비율, 성장성 지표)

### 권장사항
1. **1단계**: 키움 API로 대체 가능한 60% 먼저 구현
2. **2단계**: 키움 추가 API 확인하여 대체율 향상  
3. **3단계**: 하이브리드 방식으로 나머지 15% 해결

---
*분석 일시: 2024-12-25*  
*키움 API 버전: 현재 구현 버전 기준*